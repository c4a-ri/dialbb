import{d as p,o as d,c as _,a as e,t as $,p as v,b as m,r as z,e as g,w,v as x,u as h,F as I,f as B,g as A,h as b,n as C,i as S,j as D,k as H}from"./vendor.c665bbf2.js";const V=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const u of n.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function c(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerpolicy&&(n.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?n.credentials="include":o.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(o){if(o.ep)return;o.ep=!0;const n=c(o);fetch(o.href,n)}};V();var f=(s,r)=>{const c=s.__vccOpts||s;for(const[i,o]of r)c[i]=o;return c};const L=s=>(v("data-v-4d497fd1"),s=s(),m(),s),O={class:"row"},q=L(()=>e("div",{class:"col-auto chat-icon-l"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",fill:"currentColor",class:"bi bi-chat-left-text",viewBox:"0 0 16 16"},[e("path",{d:"M14 1a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1H4.414A2 2 0 0 0 3 11.586l-2 2V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12.793a.5.5 0 0 0 .854.353l2.853-2.853A1 1 0 0 1 4.414 12H14a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"}),e("path",{d:"M3 3.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zM3 6a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9A.5.5 0 0 1 3 6zm0 2.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5z"})])],-1)),F={class:"chat-l col-7 chat-text-l"},K=p({props:{utterance:{type:String,required:!0}},setup(s){return(r,c)=>(d(),_("div",O,[q,e("div",F,$(s.utterance),1)]))}});var N=f(K,[["__scopeId","data-v-4d497fd1"]]);const T=s=>(v("data-v-7f985fc5"),s=s(),m(),s),E={class:"row"},P={class:"chat-r col-7 ms-auto chat-text-r"},j=T(()=>e("div",{class:"col-auto chat-icon-r"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",fill:"currentColor",class:"bi bi-chat-right-text",viewBox:"0 0 16 16"},[e("path",{d:"M2 1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h9.586a2 2 0 0 1 1.414.586l2 2V2a1 1 0 0 0-1-1H2zm12-1a2 2 0 0 1 2 2v12.793a.5.5 0 0 1-.854.353l-2.853-2.853a1 1 0 0 0-.707-.293H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h12z"}),e("path",{d:"M3 3.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zM3 6a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9A.5.5 0 0 1 3 6zm0 2.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5z"})])],-1)),G=p({props:{utterance:{type:String,required:!0}},setup(s){return(r,c)=>(d(),_("div",E,[e("div",P,$(s.utterance),1),j]))}});var J=f(G,[["__scopeId","data-v-7f985fc5"]]);const Q=s=>(v("data-v-6d3d3b24"),s=s(),m(),s),R={class:"container d-flex flex-column"},W={class:"row"},X=Q(()=>e("div",{class:"col-auto"},[e("h1",{class:"h1"},"DialBB Application Frontend")],-1)),Y={class:"col-auto"},Z={class:"col-auto"},tt=["disabled"],et={class:"scroll",id:"scroll"},st={class:"row"},ot={class:"row"},at={class:"col-auto"},nt=["onKeydown"],rt={class:"col-auto"},ct=["disabled"],it=p({setup(s){const r=z([]),c=g("");let i=!1,o="";const n=g("user"),u=t=>t.component=="SystemUtterance"?N:J,U=t=>{t.key==="Enter"&&y()},y=async()=>{console.log("textinput called");const t=c.value;if(t.length==0)return;console.log(`user utterance =${t}`),r.push({component:"UserUtterance",utterance:t});const a=await b.post("/dialogue",{user_id:n.value,session_id:o,user_utterance:t});if(console.log(`system utterance = ${a.data.system_utterance}`),r.push({component:"SystemUtterance",utterance:a.data.system_utterance}),c.value="",k(),a.data&&a.data.aux_data&&a.data.aux_data.clear_chat_window==="yes"){console.log("Server requested clear_chat_window -> reloading page."),setTimeout(()=>{window.location.reload()},5e3);return}},M=async()=>{try{const t=await b.post("/init",{user_id:n.value});console.log(`session_id = ${t.data.session_id}`),o=t.data.session_id,console.log(`system utterance = ${t.data.system_utterance}`),r.push({component:"SystemUtterance",utterance:t.data.system_utterance}),i=!0}catch(t){t instanceof Error&&r.push({component:"SystemUtterance",utterance:`System Error - ${t.message}`})}},k=()=>{C(()=>{const t=document.getElementById("scroll"),a=(t==null?void 0:t.scrollHeight)-(t==null?void 0:t.clientHeight);console.log(`bottom = ${a}`),t==null||t.scroll(0,a)})};return(t,a)=>(d(),_("div",R,[e("header",null,[e("div",W,[X,e("div",Y,[w(e("input",{type:"text",class:"form-control","onUpdate:modelValue":a[0]||(a[0]=l=>n.value=l),placeholder:"user id"},null,512),[[x,n.value]])]),e("div",Z,[e("button",{class:"btn btn-primary",disabled:h(i),onClick:a[1]||(a[1]=l=>M())},"start dialouge",8,tt)])])]),e("article",null,[e("div",et,[(d(!0),_(I,null,B(h(r),l=>(d(),_("div",st,[(d(),S(D(u(l)),{utterance:l.utterance},null,8,["utterance"]))]))),256))])]),e("footer",null,[e("div",ot,[e("div",at,[w(e("input",{type:"text",class:"form-control","onUpdate:modelValue":a[2]||(a[2]=l=>c.value=l),onKeydown:A(U,["enter"]),placeholder:"input utterance"},null,40,nt),[[x,c.value]])]),e("div",rt,[e("button",{class:"btn btn-primary",disabled:c.value.length==0||!h(i),onClick:a[3]||(a[3]=l=>y())},"send",8,ct)])])])]))}});var lt=f(it,[["__scopeId","data-v-6d3d3b24"]]);const dt=p({setup(s){return(r,c)=>(d(),S(lt,{id:"DialogMain"}))}});H(dt).mount("#app");
