import{d as p,o as d,c as _,a as e,t as $,p as v,b as m,r as z,e as g,w,v as x,u as h,F as I,f as B,g as A,h as b,n as C,i as S,j as D,k as H}from"./vendor.c665bbf2.js";const V=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function c(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerpolicy&&(a.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?a.credentials="include":o.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=c(o);fetch(o.href,a)}};V();var f=(s,n)=>{const c=s.__vccOpts||s;for(const[i,o]of n)c[i]=o;return c};const L=s=>(v("data-v-7cfd1872"),s=s(),m(),s),O={class:"row"},F=L(()=>e("div",{class:"col-auto chat-icon-l"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",fill:"currentColor",class:"bi bi-chat-left-text",viewBox:"0 0 16 16"},[e("path",{d:"M14 1a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1H4.414A2 2 0 0 0 3 11.586l-2 2V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12.793a.5.5 0 0 0 .854.353l2.853-2.853A1 1 0 0 1 4.414 12H14a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"}),e("path",{d:"M3 3.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zM3 6a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9A.5.5 0 0 1 3 6zm0 2.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5z"})])],-1)),K={class:"chat-l col-7 chat-text-l"},N=p({props:{utterance:{type:String,required:!0}},setup(s){return(n,c)=>(d(),_("div",O,[F,e("div",K,$(s.utterance),1)]))}});var q=f(N,[["__scopeId","data-v-7cfd1872"]]);const E=s=>(v("data-v-c0e6c17c"),s=s(),m(),s),P={class:"row"},T={class:"chat-r col-7 ms-auto chat-text-r"},j=E(()=>e("div",{class:"col-auto chat-icon-r"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",fill:"currentColor",class:"bi bi-chat-right-text",viewBox:"0 0 16 16"},[e("path",{d:"M2 1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h9.586a2 2 0 0 1 1.414.586l2 2V2a1 1 0 0 0-1-1H2zm12-1a2 2 0 0 1 2 2v12.793a.5.5 0 0 1-.854.353l-2.853-2.853a1 1 0 0 0-.707-.293H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h12z"}),e("path",{d:"M3 3.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zM3 6a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9A.5.5 0 0 1 3 6zm0 2.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5z"})])],-1)),G=p({props:{utterance:{type:String,required:!0}},setup(s){return(n,c)=>(d(),_("div",P,[e("div",T,$(s.utterance),1),j]))}});var J=f(G,[["__scopeId","data-v-c0e6c17c"]]);const Q=s=>(v("data-v-918affdc"),s=s(),m(),s),R={class:"container d-flex flex-column"},W={class:"row"},X=Q(()=>e("div",{class:"col-auto"},[e("h1",{class:"h1"},"DialBB Application Frontend")],-1)),Y={class:"col-auto"},Z={class:"col-auto"},tt=["disabled"],et={class:"scroll",id:"scroll"},st={class:"row"},ot={class:"row"},at={class:"col-auto"},nt=["onKeydown"],rt={class:"col-auto"},ct=["disabled"],it=p({setup(s){const n=z([]),c=g("");let i=!1,o="";const a=g("user"),u=t=>t.component=="SystemUtterance"?q:J,U=t=>{t.key==="Enter"&&y()},y=async()=>{const t=c.value;if(t.length==0)return;console.log(`user utterance =${t}`),n.push({component:"UserUtterance",utterance:t});const r=await b.post("/dialogue",{user_id:a.value,session_id:o,user_utterance:t});console.log(`system utterance = ${r.data.system_utterance}`),n.push({component:"SystemUtterance",utterance:r.data.system_utterance}),c.value="",k()},M=async()=>{try{const t=await b.post("/init",{user_id:a.value});console.log(`session_id = ${t.data.session_id}`),o=t.data.session_id,console.log(`system utterance = ${t.data.system_utterance}`),n.push({component:"SystemUtterance",utterance:t.data.system_utterance}),i=!0}catch(t){t instanceof Error&&n.push({component:"SystemUtterance",utterance:`System Error - ${t.message}`})}},k=()=>{C(()=>{const t=document.getElementById("scroll"),r=(t==null?void 0:t.scrollHeight)-(t==null?void 0:t.clientHeight);console.log(`bottom = ${r}`),t==null||t.scroll(0,r)})};return(t,r)=>(d(),_("div",R,[e("header",null,[e("div",W,[X,e("div",Y,[w(e("input",{type:"text",class:"form-control","onUpdate:modelValue":r[0]||(r[0]=l=>a.value=l),placeholder:"user id"},null,512),[[x,a.value]])]),e("div",Z,[e("button",{class:"btn btn-primary",disabled:h(i),onClick:r[1]||(r[1]=l=>M())},"start dialouge",8,tt)])])]),e("article",null,[e("div",et,[(d(!0),_(I,null,B(h(n),l=>(d(),_("div",st,[(d(),S(D(u(l)),{utterance:l.utterance},null,8,["utterance"]))]))),256))])]),e("footer",null,[e("div",ot,[e("div",at,[w(e("input",{type:"text",class:"form-control","onUpdate:modelValue":r[2]||(r[2]=l=>c.value=l),onKeydown:A(U,["enter"]),placeholder:"input utterance"},null,40,nt),[[x,c.value]])]),e("div",rt,[e("button",{class:"btn btn-primary",disabled:c.value.length==0||!h(i),onClick:r[3]||(r[3]=l=>y())},"send",8,ct)])])])]))}});var lt=f(it,[["__scopeId","data-v-918affdc"]]);const dt=p({setup(s){return(n,c)=>(d(),S(lt,{id:"DialogMain"}))}});H(dt).mount("#app");
